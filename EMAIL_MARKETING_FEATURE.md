# ميزة التسويق بالبريد الإلكتروني - Email Marketing Feature

## نظرة عامة
تم إضافة ميزة التسويق بالبريد الإلكتروني إلى لوحة التحكم الإدارية في موقع Infinity Wear. تتيح هذه الميزة للمديرين إرسال رسائل تسويقية وإعلانات للعملاء والفرق المختلفة.

## الميزات المضافة

### 1. رابط في الشريط الجانبي
- تم إضافة رابط "التسويق بالبريد الإلكتروني" في الشريط الجانبي للإدارة
- يقع تحت قسم "إدارة الفرق"
- أيقونة: `fas fa-envelope-open-text`

### 2. لوحة التحكم الرئيسية
- عرض إحصائيات المستخدمين حسب النوع
- إجراءات سريعة لإنشاء حملات مختلفة
- تصميم جميل مع بطاقات تفاعلية
- إحصائيات في الوقت الفعلي

### 3. نموذج إنشاء الحملة
- واجهة جميلة وسهلة الاستخدام
- اختيار المستلمين حسب الفئة:
  - جميع المستخدمين
  - العملاء فقط
  - المستوردين فقط
  - فريق المبيعات
  - فريق التسويق
- معاينة الرسالة قبل الإرسال
- عداد الأحرف للعنوان والمحتوى
- التحقق من صحة البيانات

### 4. قالب البريد الإلكتروني
- تصميم احترافي ومتجاوب
- متوافق مع جميع أجهزة العرض
- يتضمن معلومات الشركة وروابط التواصل
- خيار إلغاء الاشتراك

### 5. نظام الإرسال
- إرسال آمن مع معالجة الأخطاء
- تأخير صغير بين الرسائل لتجنب إرهاق الخادم
- تسجيل الأخطاء في ملفات السجل
- إحصائيات الإرسال

## الملفات المضافة/المعدلة

### Controllers
- `app/Http/Controllers/Admin/EmailMarketingController.php` - المتحكم الرئيسي

### Views
- `resources/views/admin/email-marketing/index.blade.php` - الصفحة الرئيسية
- `resources/views/admin/email-marketing/create.blade.php` - نموذج إنشاء الحملة
- `resources/views/emails/marketing-campaign.blade.php` - قالب البريد الإلكتروني

### Routes
- تم إضافة 4 مسارات جديدة في `routes/web.php`:
  - `GET admin/email-marketing` - الصفحة الرئيسية
  - `GET admin/email-marketing/create` - نموذج الإنشاء
  - `POST admin/email-marketing` - حفظ وإرسال الحملة
  - `GET admin/email-marketing/stats` - الإحصائيات

### Database
- `database/migrations/2025_10_07_141634_update_users_table_add_sales_marketing_types.php` - تحديث أنواع المستخدمين

### Sidebar
- `resources/views/partials/admin-sidebar.blade.php` - إضافة الرابط الجديد

## كيفية الاستخدام

### 1. الوصول للميزة
- تسجيل الدخول كمدير
- الانتقال إلى "التسويق بالبريد الإلكتروني" من الشريط الجانبي

### 2. إنشاء حملة جديدة
- النقر على "إنشاء حملة جديدة"
- اختيار الفئات المستهدفة
- كتابة عنوان الرسالة
- كتابة محتوى الرسالة
- معاينة الرسالة
- النقر على "إرسال الرسالة"

### 3. الإجراءات السريعة
- إرسال للعملاء فقط
- إرسال للمستوردين فقط
- إرسال للفرق (المبيعات والتسويق)

## الأمان والخصوصية

### حماية البيانات
- التحقق من صحة البيانات المدخلة
- حماية من هجمات XSS
- تسجيل جميع عمليات الإرسال

### إدارة الأخطاء
- معالجة أخطاء الإرسال
- تسجيل الأخطاء في ملفات السجل
- رسائل خطأ واضحة للمستخدم

### إلغاء الاشتراك
- رابط إلغاء الاشتراك في كل رسالة
- احترام رغبات المستخدمين

## التخصيص والتطوير

### إضافة فئات جديدة
لإضافة فئة جديدة من المستخدمين:
1. تحديث قاعدة البيانات
2. إضافة الخيار في النموذج
3. تحديث منطق الاستعلام في المتحكم

### تخصيص القالب
يمكن تخصيص قالب البريد الإلكتروني من خلال:
- تعديل `resources/views/emails/marketing-campaign.blade.php`
- إضافة متغيرات جديدة
- تغيير التصميم والألوان

### إضافة ميزات جديدة
- جدولة الإرسال
- قوالب جاهزة
- إحصائيات مفصلة
- تقسيم العملاء

## الدعم الفني

في حالة وجود مشاكل:
1. التحقق من إعدادات البريد الإلكتروني
2. مراجعة ملفات السجل
3. التأكد من صحة البيانات في قاعدة البيانات

## التحديثات المستقبلية

### ميزات مخططة
- [ ] جدولة الإرسال
- [ ] قوالب جاهزة
- [ ] إحصائيات مفصلة
- [ ] تقسيم العملاء المتقدم
- [ ] اختبار A/B
- [ ] تتبع النقرات والفتح

### تحسينات الأداء
- [ ] إرسال مجمع (Batch sending)
- [ ] طوابير الإرسال
- [ ] تحسين قوالب البريد الإلكتروني
- [ ] ضغط الصور

---

تم تطوير هذه الميزة بواسطة فريق التطوير في Infinity Wear
تاريخ الإنشاء: 7 أكتوبر 2025



