# دليل إعداد WhatsApp API - خطوة بخطوة

## الخطوة 1: التسجيل في Whapi.Cloud

1. اذهب إلى: https://whapi.cloud
2. اضغط على "Get Started Free"
3. سجل حساب جديد (مجاني)
4. ستحصل على 5 أيام مجانية للاختبار

## الخطوة 2: ربط رقم الواتساب

1. في لوحة التحكم، ستجد QR Code
2. افتح الواتساب على هاتفك
3. اذهب إلى: **الإعدادات** > **الأجهزة المرتبطة** > **ربط جهاز** > **مسح رمز QR**
4. امسح الرمز من لوحة التحكم
5. انتظر حتى يظهر "Connected"

## الخطوة 3: الحصول على API Token

1. بعد ربط الهاتف، ستجد API Token في لوحة التحكم
2. انسخ هذا الرمز (سيبدو مثل: `i4sbo2dXBNB1SbBvVwccPwpCzBDhVmcs`)

## الخطوة 4: إضافة الإعدادات في ملف .env

أضف هذه الإعدادات في ملف `.env` في مجلد المشروع:

```env
WHATSAPP_PRIMARY_NUMBER=966599476482
WHATSAPP_API_ENABLED=true
WHATSAPP_API_TOKEN=YOUR_ACTUAL_TOKEN_HERE
WHATSAPP_WEB_ENABLED=true
```

**مثال:**
```env
WHATSAPP_API_TOKEN=i4sbo2dXBNB1SbBvVwccPwpCzBDhVmcs
```

## الخطوة 5: اختبار النظام

1. اذهب إلى: http://127.0.0.1:8000/admin/whatsapp/test
2. اضغط على "اختبار الاتصال"
3. إذا نجح الاختبار، جرب إرسال رسالة

## ملاحظات مهمة

- **الرقم الأساسي**: +966 59 947 6482
- **تنسيق الأرقام**: يجب أن تكون بصيغة دولية (مثال: 966501234567)
- **الأمان**: لا تشارك API Token مع أي شخص

## استكشاف الأخطاء

### إذا ظهر "API Token غير محدد":
- تأكد من إضافة `WHATSAPP_API_TOKEN` في ملف `.env`
- تأكد من عدم وجود مسافات إضافية
- أعد تشغيل الخادم بعد التعديل

### إذا ظهر "فشل الاتصال":
- تأكد من صحة API Token
- تأكد من ربط رقم الواتساب في Whapi.Cloud
- تأكد من أن الرقم متصل بالإنترنت