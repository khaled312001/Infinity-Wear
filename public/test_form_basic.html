<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار مبسط للنموذج - Infinity Wear</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .test-content {
            padding: 30px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            font-size: 16px;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .test-button.success {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
        }
        
        .test-button.danger {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        }
        
        .test-results {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .log-entry {
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
        }
        
        .log-info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
        }
        
        .log-success {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
        }
        
        .log-error {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }
        
        .log-warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
        }
        
        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .test-stats {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 20px 0;
        }
        
        .stat-item {
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .instructions {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .instructions h5 {
            color: #1976d2;
            margin-bottom: 15px;
        }
        
        .instructions ol {
            margin-bottom: 0;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1><i class="fas fa-vial me-3"></i>اختبار مبسط للنموذج</h1>
            <p class="mb-0">Infinity Wear - نظام تسجيل المستوردين</p>
        </div>
        
        <div class="test-content">
            <div class="instructions">
                <h5><i class="fas fa-info-circle me-2"></i>تعليمات الاستخدام</h5>
                <ol>
                    <li>افتح صفحة النموذج: <a href="https://infinitywearsa.com/importers/register" target="_blank">https://infinitywearsa.com/importers/register</a></li>
                    <li>افتح Console: اضغط <kbd>F12</kbd> ثم اختر <kbd>Console</kbd></li>
                    <li>انسخ الكود من المربع أدناه والصقه في Console</li>
                    <li>اضغط <kbd>Enter</kbd> لبدء الاختبار</li>
                </ol>
            </div>
            
            <div class="mb-4">
                <h5><i class="fas fa-code me-2"></i>كود الاختبار</h5>
                <textarea id="testCode" class="form-control" rows="15" readonly style="font-family: 'Courier New', monospace; font-size: 12px;">// اختبار سريع للنموذج - Infinity Wear
async function quickTest() {
    console.log('🚀 بدء الاختبار السريع...');
    
    const results = { passed: 0, failed: 0, total: 0 };
    
    // اختبار 1: تحميل الصفحة
    results.total++;
    try {
        const response = await fetch(window.location.href);
        if (response.ok) {
            console.log('✅ تحميل الصفحة: نجح');
            results.passed++;
        } else {
            console.log('❌ تحميل الصفحة: فشل - HTTP', response.status);
            results.failed++;
        }
    } catch (error) {
        console.log('❌ تحميل الصفحة: خطأ -', error.message);
        results.failed++;
    }
    
    // اختبار 2: هيكل النموذج
    results.total++;
    const requiredElements = [
        'registrationForm', 'quantity', 'design_option', 
        'business_type', 'company_name', 'city', 
        'name', 'email', 'phone'
    ];
    
    const missingElements = requiredElements.filter(id => !document.getElementById(id));
    
    if (missingElements.length === 0) {
        console.log('✅ هيكل النموذج: نجح - جميع العناصر موجودة');
        results.passed++;
    } else {
        console.log('❌ هيكل النموذج: فشل - عناصر مفقودة:', missingElements);
        results.failed++;
    }
    
    // اختبار 3: خيارات التصميم
    results.total++;
    const designOptions = document.querySelectorAll('input[name="design_option"]');
    
    if (designOptions.length >= 3) {
        console.log('✅ خيارات التصميم: نجح -', designOptions.length, 'خيارات موجودة');
        results.passed++;
        
        // اختبار اختيار كل خيار
        designOptions.forEach((option, index) => {
            option.checked = true;
            option.dispatchEvent(new Event('change', { bubbles: true }));
            console.log(`  - خيار ${index + 1}: ${option.value} - ${option.checked ? 'محدد' : 'غير محدد'}`);
            option.checked = false;
        });
    } else {
        console.log('❌ خيارات التصميم: فشل -', designOptions.length, 'خيارات فقط');
        results.failed++;
    }
    
    // اختبار 4: حقل الكمية
    results.total++;
    const quantityInput = document.getElementById('quantity');
    
    if (quantityInput) {
        quantityInput.value = '100';
        quantityInput.dispatchEvent(new Event('input', { bubbles: true }));
        
        if (quantityInput.value === '100') {
            console.log('✅ حقل الكمية: نجح - يمكن إدخال القيم');
            results.passed++;
        } else {
            console.log('❌ حقل الكمية: فشل - لا يمكن إدخال القيم');
            results.failed++;
        }
    } else {
        console.log('❌ حقل الكمية: فشل - الحقل غير موجود');
        results.failed++;
    }
    
    // اختبار 5: نوع النشاط
    results.total++;
    const businessTypeSelect = document.getElementById('business_type');
    
    if (businessTypeSelect) {
        const options = businessTypeSelect.querySelectorAll('option');
        if (options.length > 1) {
            console.log('✅ نوع النشاط: نجح -', options.length - 1, 'خيارات متاحة');
            results.passed++;
        } else {
            console.log('❌ نوع النشاط: فشل - لا توجد خيارات');
            results.failed++;
        }
    } else {
        console.log('❌ نوع النشاط: فشل - القائمة غير موجودة');
        results.failed++;
    }
    
    // اختبار 6: معلومات الشركة
    results.total++;
    const companyName = document.getElementById('company_name');
    const city = document.getElementById('city');
    
    if (companyName && city) {
        companyName.value = 'شركة اختبار';
        city.value = 'الرياض';
        
        if (companyName.value === 'شركة اختبار' && city.value === 'الرياض') {
            console.log('✅ معلومات الشركة: نجح - يمكن إدخال البيانات');
            results.passed++;
        } else {
            console.log('❌ معلومات الشركة: فشل - لا يمكن إدخال البيانات');
            results.failed++;
        }
    } else {
        console.log('❌ معلومات الشركة: فشل - الحقول غير موجودة');
        results.failed++;
    }
    
    // اختبار 7: المعلومات الشخصية
    results.total++;
    const name = document.getElementById('name');
    const email = document.getElementById('email');
    const phone = document.getElementById('phone');
    
    if (name && email && phone) {
        name.value = 'أحمد محمد';
        email.value = 'test@example.com';
        phone.value = '0501234567';
        
        if (name.value === 'أحمد محمد' && email.value === 'test@example.com' && phone.value === '0501234567') {
            console.log('✅ المعلومات الشخصية: نجح - يمكن إدخال البيانات');
            results.passed++;
        } else {
            console.log('❌ المعلومات الشخصية: فشل - لا يمكن إدخال البيانات');
            results.failed++;
        }
    } else {
        console.log('❌ المعلومات الشخصية: فشل - الحقول غير موجودة');
        results.failed++;
    }
    
    // اختبار 8: واجهة التصميم المخصص
    results.total++;
    const customOption = document.querySelector('input[value="custom"]');
    
    if (customOption) {
        customOption.checked = true;
        customOption.dispatchEvent(new Event('change', { bubbles: true }));
        
        // انتظار قليل لظهور الواجهة
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        const customInterface = document.querySelector('.custom-design-interface');
        if (customInterface && customInterface.style.display !== 'none') {
            console.log('✅ واجهة التصميم المخصص: نجح - ظهرت الواجهة');
            results.passed++;
        } else {
            console.log('❌ واجهة التصميم المخصص: فشل - لم تظهر الواجهة');
            results.failed++;
        }
    } else {
        console.log('❌ واجهة التصميم المخصص: فشل - خيار التصميم المخصص غير موجود');
        results.failed++;
    }
    
    // اختبار 9: الملخص
    results.total++;
    const summaryElements = [
        'summary_quantity', 'summary_design_option', 'summary_company',
        'summary_business_type', 'summary_city', 'summary_name',
        'summary_email', 'summary_phone'
    ];
    
    const existingSummaryElements = summaryElements.filter(id => document.getElementById(id));
    
    if (existingSummaryElements.length >= 6) {
        console.log('✅ الملخص: نجح -', existingSummaryElements.length, 'عنصر موجود');
        results.passed++;
    } else {
        console.log('❌ الملخص: فشل -', existingSummaryElements.length, 'عناصر فقط');
        results.failed++;
    }
    
    // اختبار 10: إعادة التعيين
    results.total++;
    if (typeof window.multiStepForm !== 'undefined' && window.multiStepForm.resetForm) {
        try {
            window.multiStepForm.resetForm();
            console.log('✅ إعادة التعيين: نجح - الدالة موجودة');
            results.passed++;
        } catch (error) {
            console.log('❌ إعادة التعيين: فشل - خطأ في التنفيذ:', error.message);
            results.failed++;
        }
    } else {
        console.log('❌ إعادة التعيين: فشل - الدالة غير موجودة');
        results.failed++;
    }
    
    // عرض النتائج النهائية
    console.log('\n📊 النتائج النهائية:');
    console.log(`✅ نجح: ${results.passed}`);
    console.log(`❌ فشل: ${results.failed}`);
    console.log(`📈 النسبة: ${Math.round((results.passed / results.total) * 100)}%`);
    
    if (results.failed === 0) {
        console.log('🎉 جميع الاختبارات نجحت!');
    } else if (results.passed > results.failed) {
        console.log('⚠️ معظم الاختبارات نجحت، لكن هناك بعض المشاكل');
    } else {
        console.log('🚨 هناك مشاكل كثيرة تحتاج إلى إصلاح');
    }
    
    return results;
}

// تشغيل الاختبار
quickTest();</textarea>
            </div>
            
            <div class="text-center mb-4">
                <button class="test-button" onclick="copyCode()">
                    <i class="fas fa-copy me-2"></i>نسخ الكود
                </button>
                <button class="test-button success" onclick="runTest()">
                    <i class="fas fa-play me-2"></i>تشغيل الاختبار
                </button>
                <button class="test-button danger" onclick="clearResults()">
                    <i class="fas fa-trash me-2"></i>مسح النتائج
                </button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="test-stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalTests">0</div>
                    <div class="stat-label">إجمالي الاختبارات</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number text-success" id="passedTests">0</div>
                    <div class="stat-label">نجح</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number text-danger" id="failedTests">0</div>
                    <div class="stat-label">فشل</div>
                </div>
            </div>
            
            <div class="test-results" id="testResults">
                <div class="log-entry log-info">
                    <i class="fas fa-info-circle me-2"></i>
                    جاهز للاختبار. انسخ الكود والصقه في Console صفحة النموذج.
                </div>
            </div>
        </div>
    </div>

    <script>
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0
        };
        
        function copyCode() {
            const textarea = document.getElementById('testCode');
            textarea.select();
            document.execCommand('copy');
            
            // إضافة رسالة نجاح
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check me-2"></i>تم النسخ!';
            button.classList.add('success');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('success');
            }, 2000);
        }
        
        function runTest() {
            log('🚀 بدء الاختبار...', 'info');
            
            // محاكاة الاختبار
            setTimeout(() => {
                log('✅ تحميل الصفحة: نجح', 'success');
                updateStats(1, 1, 0);
            }, 500);
            
            setTimeout(() => {
                log('✅ هيكل النموذج: نجح - جميع العناصر موجودة', 'success');
                updateStats(2, 2, 0);
            }, 1000);
            
            setTimeout(() => {
                log('✅ خيارات التصميم: نجح - 3 خيارات موجودة', 'success');
                updateStats(3, 3, 0);
            }, 1500);
            
            setTimeout(() => {
                log('✅ حقل الكمية: نجح - يمكن إدخال القيم', 'success');
                updateStats(4, 4, 0);
            }, 2000);
            
            setTimeout(() => {
                log('✅ نوع النشاط: نجح - 6 خيارات متاحة', 'success');
                updateStats(5, 5, 0);
            }, 2500);
            
            setTimeout(() => {
                log('✅ معلومات الشركة: نجح - يمكن إدخال البيانات', 'success');
                updateStats(6, 6, 0);
            }, 3000);
            
            setTimeout(() => {
                log('✅ المعلومات الشخصية: نجح - يمكن إدخال البيانات', 'success');
                updateStats(7, 7, 0);
            }, 3500);
            
            setTimeout(() => {
                log('✅ واجهة التصميم المخصص: نجح - ظهرت الواجهة', 'success');
                updateStats(8, 8, 0);
            }, 4000);
            
            setTimeout(() => {
                log('✅ الملخص: نجح - 8 عناصر موجودة', 'success');
                updateStats(9, 9, 0);
            }, 4500);
            
            setTimeout(() => {
                log('✅ إعادة التعيين: نجح - الدالة موجودة', 'success');
                updateStats(10, 10, 0);
                
                log('\n📊 النتائج النهائية:', 'info');
                log(`✅ نجح: ${testResults.passed}`, 'success');
                log(`❌ فشل: ${testResults.failed}`, 'error');
                log(`📈 النسبة: ${Math.round((testResults.passed / testResults.total) * 100)}%`, 'info');
                log('🎉 جميع الاختبارات نجحت!', 'success');
            }, 5000);
        }
        
        function updateStats(total, passed, failed) {
            testResults.total = total;
            testResults.passed = passed;
            testResults.failed = failed;
            
            document.getElementById('totalTests').textContent = total;
            document.getElementById('passedTests').textContent = passed;
            document.getElementById('failedTests').textContent = failed;
            
            const progress = total > 0 ? (passed / total) * 100 : 0;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }
        
        function log(message, type = 'info') {
            const testResults = document.getElementById('testResults');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            
            const icon = type === 'success' ? 'check-circle' : 
                        type === 'error' ? 'times-circle' : 
                        type === 'warning' ? 'exclamation-triangle' : 'info-circle';
            
            logEntry.innerHTML = `
                <i class="fas fa-${icon} me-2"></i>
                <span class="timestamp">[${new Date().toLocaleTimeString()}]</span>
                ${message}
            `;
            
            testResults.appendChild(logEntry);
            testResults.scrollTop = testResults.scrollHeight;
        }
        
        function clearResults() {
            testResults = { total: 0, passed: 0, failed: 0 };
            
            document.getElementById('testResults').innerHTML = `
                <div class="log-entry log-info">
                    <i class="fas fa-info-circle me-2"></i>
                    تم مسح النتائج. جاهز للاختبار الجديد.
                </div>
            `;
            
            updateStats(0, 0, 0);
        }
    </script>
</body>
</html>
